{% set blocks  = 'helm/app/_twig/values.yaml/' %}
feature: {{ to_yaml(@('helm.feature'), 2, 2) | raw }}
docker:
  image_pull_config: {{ @('docker.image_pull_config') | raw }}
  services: {{ to_yaml(deep_merge([
      filter_local_services(@('services')),
      @('pipeline.base.services')
    ]), 2, 4) | raw }}
  image:
    console: {{ @('docker.repository') ~ ':' ~ @('app.version') ~ '-console' }}
    keycloak: {{ @('docker.repository') ~ ':' ~ @('app.version') ~ '-keycloak' }}
prometheus: {{ to_yaml(@('pipeline.base.prometheus'), 2, 2) | raw }}
service:
  mysql: {{ ("mysql" in @('app.services')) ? 'true' : 'false' }}
  postgres: {{ ("postgres" in @('app.services')) ? 'true' : 'false' }}
ingress: "standard" # standard or istio
istio: {{ to_yaml(@('pipeline.base.istio'), 2, 2) | raw }}
resourcePrefix: {{ @('pipeline.base.resourcePrefix') | json_encode | raw }}
